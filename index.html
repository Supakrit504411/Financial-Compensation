<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢</title>
    <link href="https://fonts.googleapis.com/css2?family=Sarabun:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root {
            --corp-navy: #1A2E44; --corp-gold: #B59461; --corp-bg: #F4F7F9;
            --corp-white: #FFFFFF; --corp-text: #333333; --corp-border: #D1D9E0;
            --corp-red: #D32F2F; --corp-green: #2E7D32;
        }
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        /* 1. Animated Background */
        body { 
            background: linear-gradient(-45deg, #1A2E44, #2c4a6e, #B59461, #1A2E44);
            background-size: 400% 400%;
            animation: gradientBG 15s ease infinite;
            color: var(--corp-text); 
            font-family: 'Sarabun', sans-serif; 
            margin: 0; 
            display: flex; 
            flex-direction: column; 
            min-height: 100vh; 
            padding: 15px; 
        }

        @keyframes gradientBG {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }

        .container { width: 100%; max-width: 430px; margin: 0 auto; flex-grow: 1; display: flex; flex-direction: column; justify-content: center; }
        
        .header { text-align: center; margin: 20px 0; animation: fadeInDown 0.8s ease-out; }
        .header h1 { font-size: 1.6rem; font-weight: 700; color: #FFF; margin: 0; text-shadow: 0 2px 4px rgba(0,0,0,0.3); }
        
        /* Glassmorphism Effect for Card if desired, or just clean white pop */
        .card { 
            background: rgba(255, 255, 255, 0.98); 
            border-radius: 20px; 
            padding: 30px; 
            box-shadow: 0 20px 50px rgba(0,0,0,0.2); 
            border: 1px solid rgba(255,255,255,0.5); 
            margin-bottom: 20px; 
            animation: popIn 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            backdrop-filter: blur(10px);
        }

        @keyframes popIn { from { opacity: 0; transform: scale(0.95) translateY(20px); } to { opacity: 1; transform: scale(1) translateY(0); } }
        @keyframes fadeInDown { from { opacity: 0; transform: translateY(-20px); } to { opacity: 1; transform: translateY(0); } }

        .input-group { margin-bottom: 20px; }
        label { display: block; font-size: 0.9rem; margin-bottom: 8px; font-weight: 600; color: var(--corp-navy); }
        
        select, input { 
            width: 100%; padding: 14px; border: 2px solid #E0E6ED; border-radius: 12px; font-size: 1rem; outline: none; transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1); background: #FAFCFD; 
        }
        
        /* Input Focus Effect */
        input:focus, select:focus { 
            border-color: var(--corp-gold); 
            background: #FFF; 
            box-shadow: 0 4px 12px rgba(181,148,97,0.15); 
            transform: translateY(-2px);
        }
        
        input[readonly] { background-color: #F0F4F7; color: #8898aa; border-color: transparent; }
        .grid-inputs { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 20px; }
        
        /* Button Animation */
        button { 
            width: 100%; padding: 18px; 
            background: linear-gradient(135deg, var(--corp-navy) 0%, #2c4a6e 100%);
            color: white; border: none; border-radius: 12px; 
            font-size: 1.1rem; font-weight: 600; cursor: pointer; margin-top: 10px; 
            transition: all 0.3s;
            box-shadow: 0 4px 6px rgba(26, 46, 68, 0.2);
            position: relative;
            overflow: hidden;
        }
        button:hover { transform: translateY(-3px); box-shadow: 0 7px 14px rgba(26, 46, 68, 0.25); }
        button:active { transform: translateY(1px); box-shadow: 0 2px 4px rgba(26, 46, 68, 0.2); }
        
        /* Result Box Enhancements */
        .result-box { 
            margin-top: 30px; padding: 25px 20px; border-radius: 16px; text-align: center; display: none; 
            background: linear-gradient(to bottom, #FFFFFF, #F8FAFC);
            border: 1px solid var(--corp-border); 
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.02);
            position: relative;
        }
        .result-amount { font-size: 2.8rem; font-weight: 800; margin: 10px 0; letter-spacing: -1px; }
        
        .formula-card { margin-top: 30px; padding: 20px; background: #EDF2F6; border-radius: 10px; font-size: 0.8rem; color: #556677; border-left: 4px solid var(--corp-gold); }
        
        .footer-section { 
            margin-top: 25px; text-align: center; display: flex; flex-direction: column; gap: 8px; padding-top: 20px;
            border-top: 1px dashed #E0E0E0; 
        }
        .visitor-text { font-size: 0.75rem; color: var(--corp-navy); opacity: 0.6; }
        
        .developer-name { 
            font-size: 0.85rem; font-weight: 600; display: inline-block; 
            background: linear-gradient(to right, #1A2E44 0%, #B59461 25%, #2E7D32 50%, #B59461 75%, #1A2E44 100%); 
            background-size: 200% auto; -webkit-background-clip: text; -webkit-text-fill-color: transparent; 
            animation: ledFlow 3s linear infinite; 
        }
        @keyframes ledFlow { to { background-position: 200% center; } }
    </style>
</head>
<body>

<div class="container">
    <div class="header"><h1>Financial Compensation</h1></div>
    <div class="card">
        <div class="input-group">
            <label>‡∏ß‡∏∏‡∏í‡∏¥‡∏Å‡∏≤‡∏£‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label>
            <select id="eduLevel" onchange="handleEduChange()">
                <option value="12690,15370">‡∏õ‡∏ß‡∏ä.</option>
                <option value="14160,17150">‡∏õ‡∏ß‡∏™.</option>
                <option value="16830,20380">‡∏õ.‡∏ï‡∏£‡∏µ 4 ‡∏õ‡∏µ</option>
                <option value="17830,21590">‡∏õ.‡∏ï‡∏£‡∏µ 4 ‡∏õ‡∏µ (‡∏ß‡∏®‡∏Å.)</option>
                <option value="20030,24250">‡∏õ.‡πÇ‡∏ó 4 ‡∏õ‡∏µ</option>
                <option value="custom">‡∏≠‡∏∑‡πà‡∏ô‡πÜ (‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡πÄ‡∏≠‡∏á)</option>
            </select>
        </div>
        <div class="grid-inputs">
            <div><label>‡πÅ‡∏£‡∏Å‡∏ö‡∏£‡∏£‡∏à‡∏∏‡πÄ‡∏î‡∏¥‡∏°</label><input type="number" id="oldEntry" inputmode="decimal"></div>
            <div><label>‡πÅ‡∏£‡∏Å‡∏ö‡∏£‡∏£‡∏à‡∏∏‡πÉ‡∏´‡∏°‡πà</label><input type="number" id="newEntry" inputmode="decimal"></div>
        </div>
        <div class="input-group">
            <label>‡πÄ‡∏á‡∏¥‡∏ô‡πÄ‡∏î‡∏∑‡∏≠‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô (‡∏ö‡∏≤‡∏ó)</label>
            <input type="number" id="currentSalary" placeholder="‡∏£‡∏∞‡∏ö‡∏∏" inputmode="decimal">
        </div>
        <button onclick="calculate()">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢</button>

        <div id="resultBox" class="result-box">
            <div style="font-size: 0.9rem; opacity: 0.7;">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏á‡∏¥‡∏ô‡∏ä‡∏î‡πÄ‡∏ä‡∏¢‡∏™‡∏∏‡∏ó‡∏ò‡∏¥</div>
            <div id="resAmt" class="result-amount">0.00</div>
            <div id="randomMsg" style="font-size: 1rem; font-weight: 500; margin-top: 8px;"></div>
        </div>

        <div class="formula-card">
            <span style="font-weight:700; color:var(--corp-navy);">Methodology:</span><br>
            (‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô - ‡πÅ‡∏£‡∏Å‡∏ö‡∏£‡∏£‡∏à‡∏∏‡πÄ‡∏î‡∏¥‡∏°) √ó 0.5832 - (‡πÄ‡∏á‡∏¥‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô - ‡πÅ‡∏£‡∏Å‡∏ö‡∏£‡∏£‡∏à‡∏∏‡πÉ‡∏´‡∏°‡πà)
        </div>

        <div class="footer-section">
            <span class="visitor-text">‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î: <span id="total-v">...</span> ‡∏Ñ‡∏£‡∏±‡πâ‡∏á</span>
            <span class="developer-name">Developer : ‡∏ä‡∏ú.‡∏ö‡∏™.‡∏Å‡∏ü‡∏à.‡∏ô‡∏Ñ‡∏£‡∏û‡∏ô‡∏°</span>
        </div>
    </div>
</div>

<script>
    const oldInput = document.getElementById('oldEntry');
    const newInput = document.getElementById('newEntry');
    const currSalaryInput = document.getElementById('currentSalary');
    const eduSelect = document.getElementById('eduLevel');
    const resultBox = document.getElementById('resultBox');

    const posMessages = ["Wow! ‡∏â‡∏•‡∏≠‡∏á‡πÜ ‡∏´‡∏°‡∏π‡∏ó‡∏∞‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏Ç‡πâ‡∏≤‡πÅ‡∏•‡πâ‡∏ß üê∑", "‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏î‡πâ‡∏ß‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏Å‡∏£‡∏∞‡πÄ‡∏õ‡πã‡∏≤‡∏ï‡∏∏‡∏á‡πÅ‡∏ô‡πà‡∏ô‡∏≠‡∏ô üí∞", "‡∏õ‡∏±‡∏á‡∏°‡∏≤‡∏Å! ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏ï‡∏±‡∏ß‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏®‡∏£‡∏©‡∏ê‡∏µ‡∏´‡∏ô‡πâ‡∏≤‡πÉ‡∏´‡∏°‡πà ‚ú®", "‡∏™‡∏∏‡∏î‡∏¢‡∏≠‡∏î! ‡πÑ‡∏î‡πâ‡∏Ñ‡πà‡∏≤‡∏Ç‡∏ô‡∏°‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞ üç∞", "‡πÉ‡∏à‡∏ü‡∏π‡πÄ‡∏•‡∏¢‡∏™‡∏¥‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏Å‡∏±‡∏ö‡∏¢‡∏≠‡∏î‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞ üòä"];
    const negMessages = ["‡πÑ‡∏°‡πà‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏£‡∏ô‡∏∞... ‡∏™‡∏π‡πâ‡∏Å‡∏±‡∏ô‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏á‡∏ß‡∏î‡∏´‡∏ô‡πâ‡∏≤ ‚úåÔ∏è", "‡∏ï‡∏ö‡∏ö‡πà‡∏≤‡πÄ‡∏ö‡∏≤‡πÜ... ‡∏¢‡∏≠‡∏î‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤ ü•∫", "‡∏Æ‡∏∂‡∏ö‡πÑ‡∏ß‡πâ‡∏Ñ‡∏£‡∏±‡∏ö! ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÑ‡∏°‡πà‡∏ó‡∏≥‡∏£‡πâ‡∏≤‡∏¢‡πÉ‡∏Ñ‡∏£ ‚úä", "‡πÇ‡∏ñ‡πà... ‡πÄ‡∏Å‡∏∑‡∏≠‡∏ö‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡∏≠‡∏µ‡∏Å‡∏ô‡∏¥‡∏î‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô üåä", "‡πÉ‡∏à‡πÄ‡∏¢‡πá‡∏ô‡πÜ ‡∏ô‡∏∞‡∏Ñ‡∏£‡∏±‡∏ö ‡∏á‡∏ß‡∏î‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏Å‡∏±‡∏ô‡πÉ‡∏´‡∏°‡πà üåà"];

    function updateVisitorCount() {
        const cacheBuster = Math.floor(Date.now() / 1000);
        const url = `https://api.countapi.xyz/hit/pea_nkp_v2_${cacheBuster % 10}/visit`;

        fetch(url)
            .then(res => res.json())
            .then(data => document.getElementById('total-v').innerText = data.value.toLocaleString())
            .catch(() => {
                let count = localStorage.getItem('local_v') || 0;
                localStorage.setItem('local_v', ++count);
                document.getElementById('total-v').innerText = count;
            });
    }
    updateVisitorCount();

    [oldInput, newInput, currSalaryInput].forEach(input => {
        input.addEventListener('keypress', (e) => { if (e.key === 'Enter') { calculate(); input.blur(); } });
    });

    function handleEduChange() {
        const val = eduSelect.value;
        if (val === 'custom') {
            oldInput.readOnly = false; newInput.readOnly = false;
            oldInput.value = ""; newInput.value = "";
        } else {
            oldInput.readOnly = true; newInput.readOnly = true;
            const [o, n] = val.split(',').map(Number);
            oldInput.value = o; newInput.value = n;
        }
    }

    // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏≥‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ß‡∏¥‡πà‡∏á (Count Up)
    function animateValue(obj, start, end, duration) {
        let startTimestamp = null;
        const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            // Easing function for smooth stop
            const easeOutQuart = 1 - Math.pow(1 - progress, 4); 
            
            const currentVal = progress === 1 ? end : (start + (end - start) * easeOutQuart);
            obj.innerHTML = currentVal.toLocaleString(undefined, {minimumFractionDigits: 2, maximumFractionDigits: 2});
            
            if (progress < 1) {
                window.requestAnimationFrame(step);
            }
        };
        window.requestAnimationFrame(step);
    }

    function calculate() {
        const salary = parseFloat(currSalaryInput.value);
        const oldEntry = parseFloat(oldInput.value);
        const newEntry = parseFloat(newInput.value);
        
        if (isNaN(salary) || isNaN(oldEntry) || isNaN(newEntry)) {
            // Shake animation if error
            document.querySelector('.card').style.animation = 'none';
            document.querySelector('.card').offsetHeight; /* trigger reflow */
            document.querySelector('.card').style.animation = 'shake 0.5s';
            return alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
        }

        const result = ((salary - oldEntry) * 0.5832) - (salary - newEntry);
        const resAmt = document.getElementById('resAmt');
        const msgArea = document.getElementById('randomMsg');

        // Reset and Show Box
        resultBox.style.display = 'none';
        resultBox.offsetHeight; // trigger reflow
        resultBox.style.display = 'block';
        resultBox.style.animation = 'slideUp 0.5s cubic-bezier(0.175, 0.885, 0.32, 1.275)';

        // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ‡πÅ‡∏•‡∏∞‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
        let isPositive = result >= 0;
        if (isPositive) {
            resAmt.style.color = "var(--corp-green)"; 
            msgArea.style.color = "var(--corp-green)";
            msgArea.innerText = posMessages[Math.floor(Math.random() * posMessages.length)];
            
            // Effect: ‡∏¢‡∏¥‡∏á‡∏û‡∏•‡∏∏‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÑ‡∏î‡πâ‡∏Å‡∏≥‡πÑ‡∏£
            confetti({
                particleCount: 150,
                spread: 70,
                origin: { y: 0.6 },
                colors: ['#2E7D32', '#B59461', '#1A2E44'] // ‡∏™‡∏µ‡∏ò‡∏µ‡∏°‡∏≠‡∏á‡∏Ñ‡πå‡∏Å‡∏£
            });

        } else {
            resAmt.style.color = "var(--corp-red)"; 
            msgArea.style.color = "var(--corp-red)";
            msgArea.innerText = negMessages[Math.floor(Math.random() * negMessages.length)];
        }

        // Effect: ‡∏ï‡∏±‡∏ß‡πÄ‡∏•‡∏Ç‡∏ß‡∏¥‡πà‡∏á
        animateValue(resAmt, 0, result, 1500);
        
        // ‡πÄ‡∏•‡∏∑‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏•‡∏á‡∏°‡∏≤‡∏ó‡∏µ‡πà‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡πÄ‡∏•‡πá‡∏Å‡∏ô‡πâ‡∏≠‡∏¢‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠
        if(window.innerWidth < 768) {
            resultBox.scrollIntoView({ behavior: 'smooth', block: 'center' });
        }
    }
    
    // ‡πÄ‡∏û‡∏¥‡πà‡∏° CSS Animation Keyframes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Shake
    const styleSheet = document.createElement("style");
    styleSheet.innerText = `
        @keyframes shake {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }
    `;
    document.head.appendChild(styleSheet);
    
    handleEduChange();
</script>
</body>
</html>